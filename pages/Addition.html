<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Addition</title>
    <link href="../css/style.css" rel="stylesheet" type="text/css">
</head>

<body onload="displayEquation()">
    
    <header role="banner">
        <h1>
            <p>
                <label for="inputDigits">Number of digits:</label> 
                <select id="inputDigits" onchange="displayEquation()" style="padding:5px 5px; font-size:15px; border-radius: 6px;">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                </select>
            </p>            
        </h1>
        <h2 id="equation">
            <label id="lblFirstNum"></label> +
            <label id="lblSecondNum"></label> = 
            <input type="text" id="inputResult" style="font-size:30px; border-color: orange; padding: 10px 10px; border-radius: 6px;" size="3"><br>
        </h2>
        <h2>
            
            <p id="txtResult">-</p>
            <p id="txtLastAnswer">-</p>
            <p id="txtStats"></p>
        </h2>
        <p style="text-align: center;"><a href="../index.html" title="back">Back</a></p>

        <div style="text-align: center" id="divWrongAnswers">
        </div>
        <br>

    </header>        
</body>

<script>
    document.getElementById("inputResult")
        .addEventListener("keyup",
        function(event)
        {
            if(document.getElementById("inputResult").value != "")
            {
                document.getElementById("txtResult").style.backgroundColor = "white";
                document.getElementById("txtResult").innerHTML = "-";

                event.preventDefault();
                if (event.keyCode === 13)
                {
                    checkResult();
                }
            }
        }
    );

    var numItems = 0;
    var numCorrect = 0;

    function displayEquation()
    {
        var digit = new Number(document.getElementById("inputDigits").value);
        document.getElementById("txtStats").innerHTML = "Score: " + numCorrect + "<br>Total items:" + numItems;
        document.getElementById("lblFirstNum").textContent = Math.floor(Math.random() * Math.pow(10, digit));
        document.getElementById("lblSecondNum").textContent = Math.floor(Math.random() * Math.pow(10, digit));
        document.getElementById("inputResult").value = "";
        document.getElementById("inputResult").focus();
    }

    function checkResult()
    {
        numItems++;
        var firstNum = new Number(document.getElementById("lblFirstNum").textContent);
        var secondNum = new Number(document.getElementById("lblSecondNum").textContent);
        var answer = new Number(document.getElementById("inputResult").value);
        var correctAnswer =  firstNum + secondNum;

        var divStyle;
        if (correctAnswer == answer)
        {
            document.getElementById("txtResult").style.backgroundColor = "lightgreen";
            document.getElementById("txtResult").innerHTML = "Correct!";
            numCorrect++;
            divStyle = ' style="background-color:lightgreen" ';
        }
        else
        {
            document.getElementById("txtResult").style.backgroundColor = "pink";
            document.getElementById("txtResult").innerHTML = "Incorrect!";            
            divStyle = ' style="background-color:pink" ';
        }
        document.getElementById("txtLastAnswer").innerHTML = "Your last answer: " + answer;
        document.getElementById("txtResult").innerHTML += ' ' + firstNum + " + " + secondNum + " is " + correctAnswer;
        document.getElementById("divWrongAnswers").innerHTML += "<div "+divStyle+" id='"+numCorrect + "_of_" + numItems+"'>"+document.getElementById("txtResult").innerHTML+". Your answer is "+answer+".</br></div>";

        displayEquation();
    }
</script>    
</html>