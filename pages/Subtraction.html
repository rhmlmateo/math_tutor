<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link href="../css/style.css" rel="stylesheet" type="text/css">
</head>

<body onload="displayEquation()">
    
    <header role="banner">
        <h1>
            <p>Addition</p>
            <p>
                <label for="inputDigits">Number of digits:</label> 
                <select id="inputDigits" onchange="displayEquation()">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                </select>
            </p>            
        </h1>
        <h2 id="equation">
            <label id="lblFirstNum"></label> -
            <label id="lblSecondNum"></label> = 
            <input type="text" id="inputResult"><br>
        </h2>
        <h2>
            
            <p id="txtResult">-</p>
            <p id="txtLastAnswer">-</p>
            <p id="txtStats"></p><br>
        </h2>
        <p style="text-align: center;"><a href="../index.html" title="back">Back</a></p>

    </header>        
</body>

<script>
    document.getElementById("inputResult")
        .addEventListener("keyup",
        function(event)
        {
            document.getElementById("txtResult").style.backgroundColor = "white";
            document.getElementById("txtResult").innerHTML = "-";

            event.preventDefault();
            if (event.keyCode === 13)
            {
                checkResult();
            }
        }
    );

    var numItems = 0;
    var numCorrect = 0;
    var subtrahend = 0;
    var minuend = 0;

    function getNewSetofNumbers()
    {
        var digit = new Number(document.getElementById("inputDigits").value);

        do
        {
            subtrahend = Math.floor(Math.random() * Math.pow(10, digit));
            minuend = Math.floor(Math.random() * Math.pow(10, digit));
        }
        while (subtrahend < minuend)
    }

    function displayEquation()
    {
        getNewSetofNumbers();
        document.getElementById("txtStats").innerHTML = "Score: " + numCorrect + " / " + numItems;
        document.getElementById("lblFirstNum").textContent = subtrahend;
        document.getElementById("lblSecondNum").textContent = minuend;
        document.getElementById("inputResult").value = "";
        document.getElementById("inputResult").focus();
    }

    function checkResult()
    {
        numItems++;
        var answer = new Number(document.getElementById("inputResult").value);
        var correctAnswer =  Number(subtrahend) - Number(minuend);

        if (correctAnswer == answer)
        {
            document.getElementById("txtResult").style.backgroundColor = "green";
            document.getElementById("txtResult").innerHTML = "Correct!";
            numCorrect++;
        }
        else
        {
            document.getElementById("txtResult").style.backgroundColor = "red";
            document.getElementById("txtResult").innerHTML = "Incorrect!";
        }

        document.getElementById("txtLastAnswer").innerHTML = "Your last answer: " + answer;
        document.getElementById("txtResult").innerHTML += ' ' + subtrahend + " - " + minuend + " is " + correctAnswer;

        displayEquation();
    }
</script>    
</html>